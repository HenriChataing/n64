start_address = "0xffffffff8037a454"

asm_code = """
    lui      at, 0x4780
    mtc1     at, cr6
    lwc1     cr4, 0x0(t1)
    addiu    t1, t1, 0x4
    mul.s    f8, f4, f6
    trunc.w.s f10, f8
    mfc1     t7, cr10
    nop
    sw       t7, 0x14(sp)
    addiu    t8, sp, 0x14
    lh       t9, 0x0(t8)
    addiu    a3, a3, 0x2
    sh       t9, -0x2(a3)
    addiu    t2, sp, 0x14
    lh       t3, 0x2(t2)
    addiu    t0, t0, 0x2
    sh       t3, -0x2(t0)
    addiu    a2, a2, 0x1
    slti     at, a2, 16
    bne      at, zero, 0xffffffff8037a454
    nop
"""

bin_code = [
    0x3c014780, 0x44813000, 0xc5240000, 0x25290004,
    0x46062202, 0x4600428d, 0x440f5000, 0x00000000,
    0xafaf0014, 0x27b80014, 0x87190000, 0x24e70002,
    0xa4f9fffe, 0x27aa0014, 0x854b0002, 0x25080002,
    0xa50bfffe, 0x24c60001, 0x28c10010, 0x1420ffec,
    0x00000000,
]

[[test]]
end_address = "0xffffffff8037a454"
start_cycles = 132581254
end_cycles = 132581275
trace = [
    { type = "load_u32", address = "0x0033a7a0", value = "0x3f800000" },
    { type = "store_u32", address = "0x0020713c", value = "0x10000" },
    { type = "load_u16", address = "0x0020713c", value = "0x1" },
    { type = "store_u16", address = "0x00221114", value = "0x1" },
    { type = "load_u16", address = "0x0020713e", value = "0x0" },
    { type = "store_u16", address = "0x00221134", value = "0x0" },
]

[[test]]
end_address = "0xffffffff8037a454"
start_cycles = 138820885
end_cycles = 138820906
trace = [
    { type = "load_u32", address = "0x00206fbc", value = "0x3f800000" },
    { type = "store_u32", address = "0x00206f8c", value = "0x10000" },
    { type = "load_u16", address = "0x00206f8c", value = "0x1" },
    { type = "store_u16", address = "0x00221012", value = "0x1" },
    { type = "load_u16", address = "0x00206f8e", value = "0x0" },
    { type = "store_u16", address = "0x00221032", value = "0x0" },
]

[[test]]
end_address = "0xffffffff8037a4a8"
start_cycles = 145052610
end_cycles = 145052631
trace = [
    { type = "load_u32", address = "0x00206fe4", value = "0x3f800000" },
    { type = "store_u32", address = "0x00206f8c", value = "0x10000" },
    { type = "load_u16", address = "0x00206f8c", value = "0x1" },
    { type = "store_u16", address = "0x00221026", value = "0x1" },
    { type = "load_u16", address = "0x00206f8e", value = "0x0" },
    { type = "store_u16", address = "0x00221046", value = "0x0" },
]

[[test]]
end_address = "0xffffffff8037a454"
start_cycles = 151296436
end_cycles = 151296457
trace = [
    { type = "load_u32", address = "0x0033a7e0", value = "0x3f800000" },
    { type = "store_u32", address = "0x00206fe4", value = "0x10000" },
    { type = "load_u16", address = "0x00206fe4", value = "0x1" },
    { type = "store_u16", address = "0x00220fdc", value = "0x1" },
    { type = "load_u16", address = "0x00206fe6", value = "0x0" },
    { type = "store_u16", address = "0x00220ffc", value = "0x0" },
]

[[test]]
end_address = "0xffffffff8037a454"
start_cycles = 160646630
end_cycles = 160646651
trace = [
    { type = "load_u32", address = "0x0033a78c", value = "0x3f800000" },
    { type = "store_u32", address = "0x0020713c", value = "0x10000" },
    { type = "load_u16", address = "0x0020713c", value = "0x1" },
    { type = "store_u16", address = "0x002148ba", value = "0x1" },
    { type = "load_u16", address = "0x0020713e", value = "0x0" },
    { type = "store_u16", address = "0x002148da", value = "0x0" },
]

[[test]]
end_address = "0xffffffff8037a4a8"
start_cycles = 166882382
end_cycles = 166882403
trace = [
    { type = "load_u32", address = "0x0033a7b4", value = "0x3f800000" },
    { type = "store_u32", address = "0x0020713c", value = "0x10000" },
    { type = "load_u16", address = "0x0020713c", value = "0x1" },
    { type = "store_u16", address = "0x002148ce", value = "0x1" },
    { type = "load_u16", address = "0x0020713e", value = "0x0" },
    { type = "store_u16", address = "0x002148ee", value = "0x0" },
]

