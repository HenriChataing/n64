start_address = "0xffffffff802e06f0"

asm_code = """
    addiu    sp, sp, 0xfeb8
    sw       ra, 0x4c(sp)
    sw       fp, 0x48(sp)
    sw       s7, 0x44(sp)
    sw       s6, 0x40(sp)
    sw       s5, 0x3c(sp)
    sw       s4, 0x38(sp)
    sw       s3, 0x34(sp)
    sw       s2, 0x30(sp)
    sw       s1, 0x2c(sp)
    sw       s0, 0x28(sp)
    sw       a0, 0x148(sp)
    sw       a3, 0x154(sp)
    sw       zero, 0x130(sp)
    lw       t7, 0xb0(a0)
    or       s1, a1, zero
    or       s7, a2, zero
    srl      t8, t7, 31
    bnel     t8, zero, 0xffffffff802e074c
    lw       t9, 0x0(s1)
"""

bin_code = [
    0x27bdfeb8, 0xafbf004c, 0xafbe0048, 0xafb70044,
    0xafb60040, 0xafb5003c, 0xafb40038, 0xafb30034,
    0xafb20030, 0xafb1002c, 0xafb00028, 0xafa40148,
    0xafa70154, 0xafa00130, 0x8c8f00b0, 0x00a08825,
    0x00c0b825, 0x000fc7c2, 0x57000004, 0x8e390000,
]

[[test]]
end_address = "0xffffffff802e0740"
trace = [
    { type = "store_u32", address = "0x001fff54", value = "0x802e0518" },
    { type = "store_u32", address = "0x001fff50", value = "0x3" },
    { type = "store_u32", address = "0x001fff4c", value = "0x80223d60" },
    { type = "store_u32", address = "0x001fff48", value = "0xc0" },
    { type = "store_u32", address = "0x001fff44", value = "0x8021c5e4" },
    { type = "store_u32", address = "0x001fff40", value = "0x801d7368" },
    { type = "store_u32", address = "0x001fff3c", value = "0x0" },
    { type = "store_u32", address = "0x001fff38", value = "0x2" },
    { type = "store_u32", address = "0x001fff34", value = "0x1" },
    { type = "store_u32", address = "0x001fff30", value = "0x802000d5" },
    { type = "store_u32", address = "0x00200050", value = "0x801d1680" },
    { type = "store_u32", address = "0x0020005c", value = "0x801cfb40" },
    { type = "store_u32", address = "0x00200038", value = "0x0" },
    { type = "load_u32", address = "0x001d1730", value = "0x82000a00" },
    { type = "load_u32", address = "0x001d2ce0", value = "0x82000a00" },
]

[[test]]
end_address = "0xffffffff802e0740"
trace = [
    { type = "store_u32", address = "0x001fff54", value = "0x802e0518" },
    { type = "store_u32", address = "0x001fff50", value = "0x3" },
    { type = "store_u32", address = "0x001fff4c", value = "0x80223d60" },
    { type = "store_u32", address = "0x001fff48", value = "0xc0" },
    { type = "store_u32", address = "0x001fff44", value = "0x8021c5e4" },
    { type = "store_u32", address = "0x001fff40", value = "0x801d7368" },
    { type = "store_u32", address = "0x001fff3c", value = "0x0" },
    { type = "store_u32", address = "0x001fff38", value = "0x2" },
    { type = "store_u32", address = "0x001fff34", value = "0x1" },
    { type = "store_u32", address = "0x001fff30", value = "0x802000d5" },
    { type = "store_u32", address = "0x00200050", value = "0x801d1680" },
    { type = "store_u32", address = "0x0020005c", value = "0x801ce600" },
    { type = "store_u32", address = "0x00200038", value = "0x0" },
    { type = "load_u32", address = "0x001d1730", value = "0x82000a00" },
    { type = "load_u32", address = "0x001d2ce0", value = "0x82000a00" },
]

